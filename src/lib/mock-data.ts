import { User, Project, ProjectMember, Document, FileTreeNode, ChatSession, Notification, Folder, Task } from '@/types';

// Mock 用户
export const mockUsers: User[] = [
  {
    id: 'user_001',
    name: '张明远',
    email: 'zhangmy@company.com',
    avatar: '',
    role: 'manager',
    department: '方案设计部',
    createdAt: '2023-01-15T08:00:00Z',
    lastActiveAt: '2025-01-19T10:30:00Z',
  },
  {
    id: 'user_002',
    name: '李朋飞',
    email: 'lixy@company.com',
    avatar: '',
    role: 'supervisor',
    department: '方案设计部',
    createdAt: '2023-03-20T08:00:00Z',
    lastActiveAt: '2025-01-19T09:45:00Z',
  },
  {
    id: 'user_003',
    name: '王文渊',
    email: 'wangsc@company.com',
    avatar: '',
    role: 'employee',
    department: '方案设计部',
    createdAt: '2023-06-10T08:00:00Z',
    lastActiveAt: '2025-01-19T11:00:00Z',
  },
  {
    id: 'user_004',
    name: '陈雨婷',
    email: 'chenyt@company.com',
    avatar: '',
    role: 'employee',
    department: '方案设计部',
    createdAt: '2023-08-15T08:00:00Z',
    lastActiveAt: '2025-01-18T17:30:00Z',
  },
  {
    id: 'user_005',
    name: '赵凯文',
    email: 'zhaokw@company.com',
    avatar: '',
    role: 'employee',
    department: '方案设计部',
    createdAt: '2024-02-01T08:00:00Z',
    lastActiveAt: '2025-01-19T08:20:00Z',
  },
];

export const currentUser = mockUsers[0];

// Mock 项目
export const mockProjects: Project[] = [
  {
    id: 'proj_001',
    name: '深圳湾口岸智慧通关系统',
    description: '深圳湾口岸旅检大厅智能化升级改造项目',
    customerId: 'cust_001',
    customerName: '深圳海关',
    industry: '海关/口岸',
    status: 'active',
    priority: 'high',
    ownerId: 'user_002',
    createdAt: '2024-12-01T10:00:00Z',
    updatedAt: '2025-01-19T09:30:00Z',
    deadline: '2025-02-28T18:00:00Z',
    tags: ['智慧口岸', '人脸识别', '通关查验', 'AI'],
  },
  {
    id: 'proj_002',
    name: '拱北海关监管仓库系统',
    description: '拱北海关保税仓库智能监管平台建设',
    customerId: 'cust_002',
    customerName: '拱北海关',
    industry: '海关/口岸',
    status: 'active',
    priority: 'high',
    ownerId: 'user_002',
    createdAt: '2024-11-15T14:00:00Z',
    updatedAt: '2025-01-18T16:45:00Z',
    deadline: '2025-03-15T18:00:00Z',
    tags: ['保税监管', 'RFID', '视频监控', '区块链'],
  },
  {
    id: 'proj_003',
    name: '广州白云机场海关查验系统',
    description: '白云机场T2航站楼海关行李查验智能化改造',
    customerId: 'cust_003',
    customerName: '广州海关',
    industry: '海关/口岸',
    status: 'pending',
    priority: 'medium',
    ownerId: 'user_002',
    createdAt: '2025-01-10T09:00:00Z',
    updatedAt: '2025-01-18T14:20:00Z',
    deadline: '2025-04-30T18:00:00Z',
    tags: ['机场海关', 'X光机', '智能审图', '行李追踪'],
  },
];

// Mock 项目成员
export const mockProjectMembers: ProjectMember[] = [
  {
    id: 'pm_001',
    projectId: 'proj_001',
    userId: 'user_002',
    user: mockUsers[1],
    role: 'owner',
    joinedAt: '2024-12-01T10:00:00Z',
  },
  {
    id: 'pm_002',
    projectId: 'proj_001',
    userId: 'user_003',
    user: mockUsers[2],
    role: 'editor',
    joinedAt: '2024-12-02T09:00:00Z',
  },
  {
    id: 'pm_003',
    projectId: 'proj_001',
    userId: 'user_004',
    user: mockUsers[3],
    role: 'editor',
    joinedAt: '2024-12-05T14:00:00Z',
  },
  {
    id: 'pm_004',
    projectId: 'proj_001',
    userId: 'user_005',
    user: mockUsers[4],
    role: 'viewer',
    joinedAt: '2024-12-10T11:00:00Z',
  },
];

// Mock 文档
export const mockDocuments: Document[] = [
  {
    id: 'doc_001',
    projectId: 'proj_001',
    folderId: 'folder_001',
    title: '深圳湾口岸需求调研报告',
    content: `# 深圳湾口岸智慧通关系统 - 需求调研报告

## 一、项目背景

深圳湾口岸是连接深圳与香港的重要陆路口岸，采用"一地两检"通关模式，日均客流量约 8 万人次。随着粤港澳大湾区建设深入推进，口岸通关压力持续增大，现有系统面临以下挑战：

### 1.1 现状问题

1. **通关效率瓶颈**
   - 高峰期（早 7-9 点，晚 17-19 点）排队时间超过 30 分钟
   - 人工查验占比 65%，自助通道利用率不足 40%
   - 证件识别准确率 92%，误判导致二次核验

2. **风险防控压力**
   - 重点人员布控依赖人工比对，响应时间 > 5 秒
   - 行李物品查验抽检率仅 15%，存在监管盲区
   - 缺乏跨部门数据共享，情报研判滞后

3. **旅客体验不佳**
   - 通关流程不透明，旅客焦虑感强
   - 缺少多语言引导（粤语/英语/普通话）
   - 特殊人群（老人/儿童/残障）服务不足

## 二、核心需求

### 2.1 智能查验系统

**功能要求：**
- 人脸识别通关：支持 1:1 证件比对 + 1:N 布控比对，识别准确率 ≥ 99.5%
- 证件 OCR 识别：支持港澳通行证、护照、回乡证等 12 种证件类型
- 活体检测：防止照片/视频攻击，检测时间 < 0.5 秒
- 自助通道改造：升级现有 60 条通道，支持"刷脸+刷证"双模式

**性能指标：**
| 指标 | 当前值 | 目标值 |
|------|--------|--------|
| 单人通关时间 | 25 秒 | ≤ 8 秒 |
| 自助通道利用率 | 40% | ≥ 75% |
| 人脸识别准确率 | 92% | ≥ 99.5% |
| 系统响应时间 | 2-3 秒 | < 1 秒 |

### 2.2 智能行李查验

**功能要求：**
- X 光机智能审图：基于 AI 的违禁品自动识别（刀具/枪支/毒品等）
- 风险评估模型：根据旅客画像、申报信息、历史记录进行风险评分
- 开箱查验辅助：AR 眼镜实时显示物品信息、查验指引
- 全流程追溯：行李从入境到放行的完整轨迹记录

**技术要求：**
- 违禁品识别准确率 ≥ 95%，误报率 < 5%
- 支持 6 种常见违禁品类别，可扩展训练
- 单张 X 光片分析时间 < 2 秒

### 2.3 数据共享平台

**功能要求：**
- 与公安、边检、检验检疫等部门实现数据互通
- 支持"单一窗口"国际贸易数据对接
- 重点人员布控库实时同步（公安部、海关总署）
- 通关数据大屏可视化展示

**安全要求：**
- 符合《网络安全法》《数据安全法》要求
- 通过等保 2.0 三级认证
- 敏感数据加密存储，传输采用 TLS 1.3
- 操作日志完整审计，保留 ≥ 6 个月

## 三、建设目标

### 3.1 业务目标

- **通关效率提升 60%**：高峰期平均通关时间从 30 分钟降至 12 分钟
- **监管能力增强**：重点人员拦截响应时间从 5 秒降至 1 秒以内
- **旅客满意度提升**：满意度调查从 78 分提升至 90 分以上

### 3.2 技术目标

- 系统可用性 ≥ 99.9%（年停机时间 < 8.76 小时）
- 支持 10 万人次/日的并发通关
- 核心业务数据实时备份，RPO < 5 分钟

## 四、项目约束

### 4.1 时间约束

- **需求确认**：2024 年 12 月 20 日前
- **方案评审**：2025 年 1 月 15 日
- **投标截止**：2025 年 2 月 28 日
- **项目交付**：2025 年 8 月 31 日（含试运行）

### 4.2 预算约束

- 总预算：2800 万元（含软硬件、实施、运维）
- 软件系统：1200 万元
- 硬件设备：1000 万元
- 实施服务：400 万元
- 运维服务（3 年）：200 万元

### 4.3 合规约束

- 必须符合海关总署《口岸信息化建设规范》
- 通过公安部信息安全产品认证
- 人脸识别算法需通过公安部检测中心认证
- 数据存储必须在境内，不得出境

## 五、风险分析

| 风险类型 | 风险描述 | 应对措施 |
|---------|---------|---------|
| 技术风险 | 人脸识别在强光/逆光下准确率下降 | 采用多光谱摄像头 + 补光设备 |
| 进度风险 | 硬件设备采购周期长（3-4 个月） | 提前启动采购，分批交付 |
| 安全风险 | 系统遭受网络攻击导致数据泄露 | 部署 WAF + 入侵检测 + 数据加密 |
| 运营风险 | 旅客不熟悉新系统，初期通行缓慢 | 提前 2 周试运行 + 现场引导员 |

## 六、附件清单

1. 《深圳湾口岸现场勘查照片》（32 张）
2. 《现有系统架构图》（PDF）
3. 《客户访谈记录》（5 份）
4. 《竞品分析报告》（拱北口岸、罗湖口岸对比）
`,
    status: 'approved',
    syncStatus: 'synced',
    createdBy: 'user_003',
    createdAt: '2024-12-05T10:00:00Z',
    updatedAt: '2024-12-20T15:30:00Z',
    updatedBy: 'user_003',
    wordCount: 1856,
    version: 5,
    lockedBy: null,
    lockedAt: null,
  },
  {
    id: 'doc_002',
    projectId: 'proj_001',
    folderId: 'folder_001',
    title: '技术方案功能清单 v3.0',
    content: `# 深圳湾口岸智慧通关系统 - 功能清单

## 版本信息

- **版本号**: v3.0
- **更新日期**: 2025-01-15
- **编写人**: 王文渊
- **审核人**: 李朋飞

---

## 一、智能查验子系统

### 1.1 人脸识别通关

#### 1.1.1 证件采集
- [x] 支持港澳通行证、护照、回乡证、台胞证
- [x] 证件 OCR 识别（准确率 ≥ 99%）
- [x] 证件真伪鉴别（紫外/红外检测）
- [ ] 电子证件芯片读取（NFC）

#### 1.1.2 人脸比对
- [x] 1:1 证件照比对（准确率 ≥ 99.5%）
- [x] 1:N 布控库比对（10 万级人脸库，< 1 秒）
- [x] 活体检测（防照片/视频攻击）
- [x] 口罩遮挡识别（疫情常态化需求）

#### 1.1.3 自助通道
- [x] 双门联动控制（防尾随）
- [x] 语音播报（粤语/普通话/英语）
- [x] 通关状态指示灯
- [ ] 身高自适应摄像头（儿童友好）

### 1.2 人工查验辅助

#### 1.2.1 查验台系统
- [x] 证件信息自动读取
- [x] 历史通关记录查询
- [x] 重点人员预警弹窗
- [x] 查验结果一键录入

#### 1.2.2 移动查验
- [x] 平板/手持终端支持
- [x] 离线查验模式
- [ ] AR 眼镜信息叠加显示

---

## 二、智能行李查验子系统

### 2.1 X 光机智能审图

#### 2.1.1 违禁品识别
- [x] 刀具类（准确率 ≥ 96%）
- [x] 枪支类（准确率 ≥ 98%）
- [x] 爆炸物（准确率 ≥ 95%）
- [x] 毒品类（准确率 ≥ 93%）
- [ ] 濒危动植物制品
- [ ] 超量现金/黄金

#### 2.1.2 图像处理
- [x] 多角度成像（正侧双视角）
- [x] 伪彩色增强
- [x] 物质密度分析
- [x] 可疑区域标注

### 2.2 风险评估

#### 2.2.1 旅客画像
- [x] 通关频次分析
- [x] 申报记录统计
- [x] 异常行为识别
- [ ] 社交关系图谱

#### 2.2.2 风险评分
- [x] 多维度风险模型（10+ 指标）
- [x] 动态阈值调整
- [x] 分级处置策略
- [ ] 机器学习模型优化

### 2.3 开箱查验

#### 2.3.1 查验辅助
- [x] 物品清单自动生成
- [x] 查验流程引导
- [x] 照片/视频取证
- [ ] AR 眼镜实时标注

#### 2.3.2 样品管理
- [x] 样品条码管理
- [x] 送检流程跟踪
- [x] 检测结果反馈
- [ ] 区块链存证

---

## 三、数据共享平台

### 3.1 数据对接

#### 3.1.1 内部系统
- [x] 海关总署 H2018 系统
- [x] 边检总站旅客信息系统
- [x] 检验检疫 CIQ 系统
- [ ] 公安部人口信息库

#### 3.1.2 外部系统
- [x] 国际贸易"单一窗口"
- [x] 粤港澳大湾区数据共享平台
- [ ] 香港入境事务处（跨境数据）

### 3.2 数据服务

#### 3.2.1 实时查询
- [x] 旅客通关记录查询
- [x] 重点人员布控查询
- [x] 物品申报记录查询
- [x] 统计报表生成

#### 3.2.2 数据分析
- [x] 通关流量分析
- [x] 风险态势分析
- [x] 设备运行监控
- [ ] 预测性维护

---

## 四、综合管理平台

### 4.1 指挥调度

#### 4.1.1 大屏展示
- [x] 实时通关数据（客流/车流）
- [x] 通道运行状态
- [x] 预警事件列表
- [x] 视频监控联动

#### 4.1.2 应急指挥
- [x] 预案管理
- [x] 一键广播
- [x] 人员调度
- [ ] 无人机巡查

### 4.2 系统管理

#### 4.2.1 用户管理
- [x] 角色权限管理
- [x] 单点登录（SSO）
- [x] 操作日志审计
- [x] 密码策略配置

#### 4.2.2 设备管理
- [x] 设备台账
- [x] 运行状态监控
- [x] 故障告警
- [ ] 远程运维

---

## 五、移动应用

### 5.1 旅客端小程序

- [x] 通关预约
- [x] 排队查询
- [x] 申报指引
- [ ] 失物招领

### 5.2 关员端 APP

- [x] 移动查验
- [x] 任务派发
- [x] 数据上报
- [ ] 知识库查询

---

## 附录：技术指标汇总

| 功能模块 | 核心指标 | 目标值 |
|---------|---------|--------|
| 人脸识别 | 1:1 准确率 | ≥ 99.5% |
| 人脸识别 | 1:N 响应时间 | < 1 秒 |
| 证件 OCR | 识别准确率 | ≥ 99% |
| X 光审图 | 违禁品识别率 | ≥ 95% |
| X 光审图 | 误报率 | < 5% |
| 系统可用性 | 年可用率 | ≥ 99.9% |
| 并发能力 | 支持通关量 | 10 万人次/日 |
`,
    status: 'pending_review',
    syncStatus: 'synced',
    createdBy: 'user_003',
    createdAt: '2024-12-10T09:00:00Z',
    updatedAt: '2025-01-15T11:20:00Z',
    updatedBy: 'user_003',
    wordCount: 1523,
    version: 8,
    lockedBy: null,
    lockedAt: null,
  },
  {
    id: 'doc_003',
    projectId: 'proj_001',
    folderId: 'folder_004',
    title: '系统架构设计方案',
    content: `# 深圳湾口岸智慧通关系统 - 系统架构设计

## 一、架构概述

本系统采用**云边端协同架构**，结合边缘计算与云计算优势，实现低延迟、高可靠的智能通关服务。

### 1.1 设计原则

- **高可用性**：核心服务双活部署，故障自动切换
- **高性能**：边缘侧实时处理，云端离线分析
- **可扩展性**：微服务架构，支持水平扩展
- **安全合规**：符合等保 2.0 三级要求，数据不出境

### 1.2 架构分层

\`\`\`
┌─────────────────────────────────────────────────────────────┐
│                      云端管理平台                            │
│  (数据分析 / 模型训练 / 统一管理 / 跨口岸协同)                │
└─────────────────────────────────────────────────────────────┘
                              ▲
                              │ 数据同步 / 模型下发
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    边缘计算节点（口岸侧）                      │
│  (实时查验 / 人脸识别 / 行李审图 / 本地缓存)                  │
└─────────────────────────────────────────────────────────────┘
                              ▲
                              │ 数据采集 / 指令下发
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      终端设备层                              │
│  (自助通道 / X光机 / 摄像头 / 查验台 / 闸机)                 │
└─────────────────────────────────────────────────────────────┘
\`\`\`

---

## 二、技术选型

### 2.1 云端平台

| 层级 | 技术栈 | 说明 |
|------|--------|------|
| 前端 | React 18 + TypeScript | 管理后台 |
| 移动端 | 微信小程序 + Taro | 旅客端/关员端 |
| API 网关 | Kong Gateway | 统一入口、限流熔断 |
| 服务注册 | Consul | 服务发现与健康检查 |
| 微服务框架 | Spring Boot 3.2 | 业务服务 |
| 消息队列 | Kafka | 高吞吐异步消息 |
| 缓存 | Redis Cluster (6 节点) | 分布式缓存 |
| 数据库 | PostgreSQL 15 (主从) | 业务数据 |
| 时序数据库 | TDengine | 通关流水、设备监控 |
| 对象存储 | MinIO | 图片/视频存储 |
| 搜索引擎 | Elasticsearch 8.x | 日志检索、全文搜索 |
| 容器编排 | Kubernetes 1.28 | 容器化部署 |
| 监控告警 | Prometheus + Grafana | 系统监控 |

### 2.2 边缘计算节点

| 组件 | 技术栈 | 说明 |
|------|--------|------|
| 边缘框架 | KubeEdge | 云边协同 |
| AI 推理 | NVIDIA Triton Server | GPU 加速推理 |
| 人脸识别 | 虹软 ArcFace SDK | 离线识别引擎 |
| OCR 引擎 | PaddleOCR | 证件识别 |
| 图像分析 | OpenCV + YOLO v8 | X 光图像处理 |
| 本地缓存 | Redis Standalone | 布控库缓存 |
| 本地数据库 | SQLite | 离线数据 |
| 消息总线 | MQTT (EMQ X) | 设备通信 |

### 2.3 AI 算法

| 算法模块 | 模型 | 性能指标 |
|---------|------|---------|
| 人脸检测 | RetinaFace | 检测率 99.8% |
| 人脸识别 | ArcFace (ResNet-100) | 准确率 99.5% |
| 活体检测 | FAS-BAS | 攻击拦截率 99% |
| 证件 OCR | CRNN + CTC | 准确率 99.2% |
| X 光审图 | YOLOv8 + ResNet | 识别率 95.3% |
| 行为分析 | 3D-CNN | 异常检出率 92% |

---

## 三、系统架构图

### 3.1 逻辑架构

\`\`\`
┌──────────────────────────────────────────────────────────────┐
│                        接入层                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ Web 前端 │  │ 小程序   │  │ 移动 APP │  │ 第三方   │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
└──────────────────────────────────────────────────────────────┘
                              ▼
┌──────────────────────────────────────────────────────────────┐
│                      API 网关层                               │
│  (认证鉴权 / 限流熔断 / 路由转发 / 日志记录)                  │
└──────────────────────────────────────────────────────────────┘
                              ▼
┌──────────────────────────────────────────────────────────────┐
│                      业务服务层                               │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ 查验服务 │  │ 行李服务 │  │ 数据服务 │  │ 管理服务 │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │ AI 服务  │  │ 消息服务 │  │ 文件服务 │  │ 报表服务 │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
└──────────────────────────────────────────────────────────────┘
                              ▼
┌──────────────────────────────────────────────────────────────┐
│                      数据层                                   │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐    │
│  │PostgreSQL│  │  Redis   │  │ TDengine │  │  MinIO   │    │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘    │
└──────────────────────────────────────────────────────────────┘
\`\`\`

### 3.2 部署架构

\`\`\`
                    ┌─────────────────────┐
                    │   负载均衡 (F5)     │
                    └─────────────────────┘
                              │
              ┌───────────────┼───────────────┐
              ▼               ▼               ▼
        ┌─────────┐     ┌─────────┐     ┌─────────┐
        │ K8s 节点1│     │ K8s 节点2│     │ K8s 节点3│
        │ (Master) │     │ (Worker) │     │ (Worker) │
        └─────────┘     └─────────┘     └─────────┘
              │               │               │
              └───────────────┼───────────────┘
                              ▼
                    ┌─────────────────────┐
                    │   存储层 (Ceph)     │
                    └─────────────────────┘

边缘节点部署（口岸现场）：
┌─────────────────────────────────────────────────────────────┐
│  边缘服务器 (GPU 服务器 x 2，双机热备)                       │
│  ├─ AI 推理服务 (人脸识别 / OCR / 图像分析)                  │
│  ├─ 本地缓存 (Redis / SQLite)                               │
│  └─ 设备接入网关 (MQTT Broker)                              │
└─────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        ▼                     ▼                     ▼
  ┌──────────┐          ┌──────────┐          ┌──────────┐
  │自助通道 x60│          │X光机 x12 │          │查验台 x30│
  └──────────┘          └──────────┘          └──────────┘
\`\`\`

---

## 四、核心服务设计

### 4.1 查验服务 (Inspection Service)

**职责**：
- 旅客信息采集与验证
- 人脸识别与比对
- 证件真伪鉴别
- 通关记录存储

**接口示例**：
\`\`\`
POST /api/v1/inspection/verify
{
  "documentType": "HK_PERMIT",
  "documentNo": "C12345678",
  "faceImage": "base64...",
  "channelId": "CH001"
}
\`\`\`

### 4.2 AI 服务 (AI Service)

**职责**：
- 人脸检测与识别
- 证件 OCR 识别
- X 光图像分析
- 行为异常检测

**技术实现**：
- GPU 加速推理（NVIDIA T4 x 4）
- 模型热更新（无需重启服务）
- 批量推理优化（Batch Size = 16）

### 4.3 数据服务 (Data Service)

**职责**：
- 与海关总署 H2018 系统对接
- 与边检系统数据交换
- 布控库实时同步
- 数据脱敏与加密

**数据流**：
\`\`\`
海关总署 ──(专线)──> 数据交换平台 ──(内网)──> 边缘节点
   │                      │
   │                      ├─> 布控库 (Redis)
   │                      ├─> 通关记录 (PostgreSQL)
   │                      └─> 统计分析 (TDengine)
\`\`\`

---

## 五、安全设计

### 5.1 网络安全

- **网络隔离**：业务网、管理网、设备网三网分离
- **边界防护**：部署防火墙、IDS/IPS、WAF
- **VPN 接入**：运维人员通过 VPN 访问
- **流量加密**：TLS 1.3 加密传输

### 5.2 数据安全

- **敏感数据加密**：AES-256 加密存储
- **脱敏处理**：日志中自动脱敏身份证号、姓名
- **访问控制**：基于 RBAC 的权限管理
- **审计日志**：所有操作记录保留 6 个月

### 5.3 应用安全

- **身份认证**：支持 CA 证书、动态令牌
- **防重放攻击**：请求签名 + 时间戳验证
- **SQL 注入防护**：参数化查询 + ORM 框架
- **XSS 防护**：输入验证 + 输出编码

---

## 六、性能设计

### 6.1 性能指标

| 场景 | 指标 | 目标值 |
|------|------|--------|
| 人脸识别 | 响应时间 | < 500ms |
| 证件 OCR | 响应时间 | < 300ms |
| X 光审图 | 响应时间 | < 2s |
| 数据查询 | 响应时间 | < 200ms |
| 系统并发 | TPS | ≥ 1000 |

### 6.2 优化策略

- **缓存策略**：布控库全量缓存到 Redis，TTL = 1 小时
- **数据库优化**：读写分离、分库分表、索引优化
- **异步处理**：非实时业务通过消息队列异步处理
- **CDN 加速**：静态资源通过 CDN 分发

---

## 七、容灾设计

### 7.1 高可用方案

- **应用层**：K8s 自动扩缩容，最少 3 个副本
- **数据库**：PostgreSQL 主从复制 + 自动故障切换
- **缓存**：Redis Cluster 6 节点，支持节点故障
- **边缘节点**：双机热备，故障切换时间 < 30 秒

### 7.2 备份策略

- **数据库备份**：每日全量备份 + 实时增量备份
- **对象存储备份**：异地容灾备份（深圳 + 北京）
- **配置备份**：Git 版本管理
- **恢复演练**：每季度进行一次容灾演练

---

## 八、运维监控

### 8.1 监控指标

- **基础设施**：CPU、内存、磁盘、网络
- **应用服务**：QPS、响应时间、错误率
- **业务指标**：通关量、识别准确率、设备在线率
- **安全监控**：异常登录、攻击检测

### 8.2 告警策略

| 级别 | 触发条件 | 通知方式 |
|------|---------|---------|
| P0 | 核心服务不可用 | 电话 + 短信 + 企业微信 |
| P1 | 识别准确率 < 95% | 短信 + 企业微信 |
| P2 | 响应时间 > 2s | 企业微信 |
| P3 | 磁盘使用率 > 80% | 邮件 |

---

## 附录：技术栈版本清单

| 组件 | 版本 | 备注 |
|------|------|------|
| Spring Boot | 3.2.1 | |
| Spring Cloud | 2023.0.0 | |
| PostgreSQL | 15.5 | |
| Redis | 7.2 | |
| Kafka | 3.6.1 | |
| Kubernetes | 1.28.5 | |
| Docker | 24.0.7 | |
| NVIDIA Triton | 2.40.0 | |
| TDengine | 3.2.0.0 | |
`,
    status: 'pending_review',
    syncStatus: 'synced',
    createdBy: 'user_003',
    createdAt: '2024-12-15T14:00:00Z',
    updatedAt: '2025-01-18T10:30:00Z',
    updatedBy: 'user_003',
    wordCount: 3256,
    version: 12,
    lockedBy: null,
    lockedAt: null,
  },
  {
    id: 'doc_004',
    projectId: 'proj_001',
    folderId: 'folder_005',
    title: 'API 接口设计文档',
    content: `# 深圳湾口岸智慧通关系统 - API 接口设计

## 一、接口规范

### 1.1 URL 规范

\`\`\`
https://api.customs-smartport.cn/v1/{module}/{resource}
\`\`\`

**示例**：
- \`/v1/inspection/verify\` - 查验接口
- \`/v1/baggage/scan\` - 行李扫描接口
- \`/v1/data/query\` - 数据查询接口

### 1.2 请求方法

| 方法 | 用途 | 幂等性 |
|------|------|--------|
| GET | 查询资源 | 是 |
| POST | 创建资源 | 否 |
| PUT | 更新资源（全量） | 是 |
| PATCH | 更新资源（部分） | 否 |
| DELETE | 删除资源 | 是 |

### 1.3 请求头

\`\`\`http
Content-Type: application/json
Authorization: Bearer {access_token}
X-Request-ID: {uuid}
X-Timestamp: {unix_timestamp}
X-Signature: {hmac_sha256}
\`\`\`

### 1.4 响应格式

**成功响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    // 业务数据
  },
  "timestamp": 1705651200000,
  "requestId": "req_abc123"
}
\`\`\`

**错误响应**：
\`\`\`json
{
  "code": 40001,
  "message": "证件号码格式错误",
  "data": null,
  "timestamp": 1705651200000,
  "requestId": "req_abc123",
  "errors": [
    {
      "field": "documentNo",
      "message": "必须为8位数字"
    }
  ]
}
\`\`\`

### 1.5 错误码规范

| 错误码 | 说明 |
|--------|------|
| 0 | 成功 |
| 10001 | 参数错误 |
| 10002 | 签名验证失败 |
| 10003 | Token 过期 |
| 20001 | 证件识别失败 |
| 20002 | 人脸比对失败 |
| 20003 | 布控命中 |
| 30001 | 数据库错误 |
| 30002 | 缓存错误 |
| 40001 | 外部接口调用失败 |
| 50001 | 系统内部错误 |

---

## 二、核心接口

### 2.1 旅客查验接口

#### 2.1.1 证件识别

**接口**：\`POST /v1/inspection/ocr\`

**请求**：
\`\`\`json
{
  "image": "base64_encoded_image",
  "documentType": "HK_PERMIT",
  "channelId": "CH001"
}
\`\`\`

**响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    "documentNo": "C12345678",
    "name": "张三",
    "gender": "M",
    "birthDate": "1990-01-01",
    "nationality": "CHN",
    "issueDate": "2023-01-01",
    "expiryDate": "2033-01-01",
    "confidence": 0.98
  }
}
\`\`\`

#### 2.1.2 人脸比对

**接口**：\`POST /v1/inspection/face-verify\`

**请求**：
\`\`\`json
{
  "liveImage": "base64_encoded_live_photo",
  "idImage": "base64_encoded_id_photo",
  "documentNo": "C12345678",
  "channelId": "CH001"
}
\`\`\`

**响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    "matched": true,
    "similarity": 0.96,
    "livenessScore": 0.99,
    "watchlistHit": false,
    "verifyTime": 450
  }
}
\`\`\`

#### 2.1.3 综合查验

**接口**：\`POST /v1/inspection/verify\`

**请求**：
\`\`\`json
{
  "documentType": "HK_PERMIT",
  "documentNo": "C12345678",
  "documentImage": "base64...",
  "faceImage": "base64...",
  "channelId": "CH001",
  "direction": "ENTRY"
}
\`\`\`

**响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    "verifyResult": "PASS",
    "personInfo": {
      "name": "张三",
      "documentNo": "C12345678",
      "gender": "M",
      "nationality": "CHN"
    },
    "faceVerify": {
      "matched": true,
      "similarity": 0.96
    },
    "watchlistCheck": {
      "hit": false
    },
    "travelHistory": {
      "lastEntry": "2024-12-01T10:30:00Z",
      "entryCount": 15
    },
    "recordId": "rec_20250119_001"
  }
}
\`\`\`

---

### 2.2 行李查验接口

#### 2.2.1 X 光图像分析

**接口**：\`POST /v1/baggage/analyze\`

**请求**：
\`\`\`json
{
  "xrayImage": "base64_encoded_xray_image",
  "machineId": "XR001",
  "passengerId": "rec_20250119_001"
}
\`\`\`

**响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    "riskLevel": "HIGH",
    "riskScore": 0.85,
    "detectedItems": [
      {
        "category": "KNIFE",
        "confidence": 0.92,
        "bbox": [120, 80, 200, 150],
        "description": "疑似刀具"
      }
    ],
    "recommendation": "MANUAL_CHECK",
    "analysisTime": 1850
  }
}
\`\`\`

#### 2.2.2 风险评估

**接口**：\`POST /v1/baggage/risk-assess\`

**请求**：
\`\`\`json
{
  "passengerId": "rec_20250119_001",
  "declaration": {
    "hasCash": false,
    "hasGoods": true,
    "goodsValue": 5000
  },
  "xrayResult": {
    "riskScore": 0.85
  }
}
\`\`\`

**响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    "overallRisk": "MEDIUM",
    "riskScore": 0.65,
    "factors": [
      {
        "factor": "XRAY_DETECTION",
        "weight": 0.4,
        "score": 0.85
      },
      {
        "factor": "TRAVEL_FREQUENCY",
        "weight": 0.2,
        "score": 0.3
      },
      {
        "factor": "DECLARATION",
        "weight": 0.2,
        "score": 0.5
      }
    ],
    "action": "RANDOM_CHECK"
  }
}
\`\`\`

---

### 2.3 数据查询接口

#### 2.3.1 通关记录查询

**接口**：\`GET /v1/data/records\`

**请求参数**：
\`\`\`
?documentNo=C12345678
&startDate=2025-01-01
&endDate=2025-01-19
&page=1
&pageSize=20
\`\`\`

**响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    "total": 15,
    "page": 1,
    "pageSize": 20,
    "records": [
      {
        "recordId": "rec_20250119_001",
        "documentNo": "C12345678",
        "name": "张三",
        "direction": "ENTRY",
        "channelId": "CH001",
        "verifyResult": "PASS",
        "timestamp": "2025-01-19T10:30:00Z"
      }
    ]
  }
}
\`\`\`

#### 2.3.2 统计数据查询

**接口**：\`GET /v1/data/statistics\`

**请求参数**：
\`\`\`
?date=2025-01-19
&type=DAILY
\`\`\`

**响应**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {
    "date": "2025-01-19",
    "totalPassengers": 82356,
    "entryCount": 41203,
    "exitCount": 41153,
    "peakHour": "08:00-09:00",
    "peakFlow": 8520,
    "avgWaitTime": 12,
    "channelUtilization": 0.78,
    "faceRecognitionRate": 0.995
  }
}
\`\`\`

---

## 三、对接接口

### 3.1 海关总署 H2018 系统

**接口**：\`POST /v1/external/h2018/sync\`

**说明**：将通关数据同步至海关总署系统

**请求**：
\`\`\`json
{
  "recordId": "rec_20250119_001",
  "documentNo": "C12345678",
  "name": "张三",
  "direction": "ENTRY",
  "timestamp": "2025-01-19T10:30:00Z",
  "verifyResult": "PASS"
}
\`\`\`

### 3.2 边检系统数据交换

**接口**：\`POST /v1/external/border/exchange\`

**说明**：与边检系统交换旅客信息

---

## 四、安全机制

### 4.1 签名算法

\`\`\`
signature = HMAC-SHA256(
  secret_key,
  method + url + timestamp + body
)
\`\`\`

### 4.2 Token 机制

- **有效期**：2 小时
- **刷新机制**：过期前 10 分钟可刷新
- **存储**：Redis，支持主动失效

### 4.3 限流策略

| 接口类型 | QPS 限制 |
|---------|---------|
| 查验接口 | 1000/s |
| 查询接口 | 500/s |
| 统计接口 | 100/s |

---

## 五、测试环境

- **地址**：https://api-test.customs-smartport.cn
- **Token**：联系管理员获取
- **Postman Collection**：见附件
`,
    status: 'approved',
    syncStatus: 'synced',
    createdBy: 'user_004',
    createdAt: '2024-12-20T16:00:00Z',
    updatedAt: '2025-01-10T09:00:00Z',
    updatedBy: 'user_004',
    wordCount: 2145,
    version: 6,
    lockedBy: null,
    lockedAt: null,
  },
  {
    id: 'doc_005',
    projectId: 'proj_001',
    folderId: 'folder_003',
    title: '投标报价单',
    content: `# 深圳湾口岸智慧通关系统 - 投标报价单

## 一、项目信息

- **项目名称**：深圳湾口岸智慧通关系统建设项目
- **招标单位**：深圳海关
- **投标单位**：XX 科技股份有限公司
- **报价日期**：2025-01-15
- **报价有效期**：90 天
- **联系人**：李朋飞（售前经理）
- **联系电话**：138-0000-1234

---

## 二、费用明细

### 2.1 软件系统费用

| 序号 | 系统模块 | 单价 (万元) | 数量 | 小计 (万元) | 备注 |
|------|---------|------------|------|-------------|------|
| 1 | 智能查验子系统 | 380 | 1 套 | 380 | 含人脸识别、证件OCR |
| 2 | 智能行李查验子系统 | 280 | 1 套 | 280 | 含X光智能审图 |
| 3 | 数据共享平台 | 220 | 1 套 | 220 | 含数据对接、交换 |
| 4 | 综合管理平台 | 180 | 1 套 | 180 | 含指挥调度、系统管理 |
| 5 | 移动应用（小程序+APP） | 80 | 1 套 | 80 | 旅客端+关员端 |
| 6 | AI 算法模型 | 150 | 1 套 | 150 | 人脸识别、图像分析 |
| | **软件系统小计** | | | **1,290** | |

### 2.2 硬件设备费用

| 序号 | 设备名称 | 规格型号 | 单价 (万元) | 数量 | 小计 (万元) |
|------|---------|---------|------------|------|-------------|
| 1 | GPU 服务器 | NVIDIA A100 x4 | 45 | 2 台 | 90 |
| 2 | 应用服务器 | 双路至强 64核 | 12 | 4 台 | 48 |
| 3 | 数据库服务器 | 双路至强 128G内存 | 15 | 2 台 | 30 |
| 4 | 存储设备 | 全闪存阵列 100TB | 80 | 1 套 | 80 |
| 5 | 网络设备 | 核心交换机+防火墙 | 35 | 1 套 | 35 |
| 6 | 人脸识别摄像头 | 200万像素 宽动态 | 0.35 | 120 个 | 42 |
| 7 | 证件阅读器 | 支持12种证件 | 0.8 | 90 台 | 72 |
| 8 | 自助通道闸机 | 双门联动 人脸识别 | 3.5 | 60 套 | 210 |
| 9 | X光机智能审图模块 | AI加速卡 | 8 | 12 套 | 96 |
| 10 | 查验台终端 | 一体机 触摸屏 | 0.6 | 30 台 | 18 |
| 11 | 大屏显示系统 | LED 3x5 拼接屏 | 25 | 1 套 | 25 |
| 12 | UPS 电源 | 100KVA 在线式 | 18 | 2 台 | 36 |
| | **硬件设备小计** | | | | **782** |

### 2.3 实施服务费用

| 序号 | 服务内容 | 单价 (万元) | 数量 | 小计 (万元) | 备注 |
|------|---------|------------|------|-------------|------|
| 1 | 系统集成实施 | 120 | 1 项 | 120 | 含安装调试 |
| 2 | 数据迁移与对接 | 80 | 1 项 | 80 | 与现有系统对接 |
| 3 | 用户培训 | 30 | 1 项 | 30 | 管理员+操作员培训 |
| 4 | 试运行支持 | 50 | 1 项 | 50 | 3个月现场支持 |
| 5 | 项目管理费 | 40 | 1 项 | 40 | PMO团队 |
| | **实施服务小计** | | | **320** | |

### 2.4 运维服务费用（3年）

| 序号 | 服务内容 | 年费 (万元) | 年限 | 小计 (万元) | 备注 |
|------|---------|------------|------|-------------|------|
| 1 | 软件维护升级 | 80 | 3 年 | 240 | 含版本升级 |
| 2 | 硬件保修服务 | 50 | 3 年 | 150 | 7x24小时响应 |
| 3 | 驻场运维 | 40 | 3 年 | 120 | 2人驻场 |
| 4 | 应急保障 | 20 | 3 年 | 60 | 重大活动保障 |
| | **运维服务小计** | | | **570** | |

---

## 三、费用汇总

| 类别 | 金额 (万元) | 占比 |
|------|-------------|------|
| 软件系统 | 1,290 | 43.5% |
| 硬件设备 | 782 | 26.4% |
| 实施服务 | 320 | 10.8% |
| 运维服务（3年） | 570 | 19.3% |
| **合计** | **2,962** | **100%** |

**大写**：人民币贰仟玖佰陆拾贰万元整

---

## 四、付款方式

| 阶段 | 付款比例 | 付款条件 | 金额 (万元) |
|------|---------|---------|-------------|
| 合同签订 | 30% | 合同生效后 5 个工作日 | 888.6 |
| 设备到货 | 30% | 硬件设备到货验收合格 | 888.6 |
| 系统上线 | 30% | 系统试运行验收合格 | 888.6 |
| 质保期满 | 10% | 质保期满（1年后） | 296.2 |
| **合计** | **100%** | | **2,962** |

---

## 五、商务条款

### 5.1 交付周期

- **合同签订**：2025 年 3 月 15 日前
- **设备到货**：合同签订后 60 天
- **系统上线**：合同签订后 150 天
- **试运行**：上线后 3 个月
- **正式验收**：2025 年 8 月 31 日前

### 5.2 质保期

- **软件系统**：验收合格后 3 年免费质保
- **硬件设备**：验收合格后 3 年免费保修
- **质保内容**：
  - 7x24 小时技术支持热线
  - 4 小时响应，24 小时到场
  - 免费软件版本升级
  - 免费硬件故障维修（人为损坏除外）

### 5.3 培训服务

- **管理员培训**：5 天，10 人次
- **操作员培训**：3 天，50 人次
- **培训地点**：深圳湾口岸现场
- **培训材料**：提供纸质+电子版操作手册

### 5.4 验收标准

- 符合《深圳湾口岸智慧通关系统技术规格书》要求
- 通过等保 2.0 三级测评
- 人脸识别准确率 ≥ 99.5%
- X 光智能审图准确率 ≥ 95%
- 系统可用性 ≥ 99.9%
- 单人通关时间 ≤ 8 秒

---

## 六、技术优势

### 6.1 核心技术

1. **自主可控 AI 算法**
   - 人脸识别算法通过公安部检测中心认证
   - X 光智能审图算法准确率行业领先
   - 支持模型持续优化与迭代

2. **云边端协同架构**
   - 边缘侧实时处理，响应时间 < 500ms
   - 云端离线分析，支持大数据挖掘
   - 断网情况下边缘节点可独立运行

3. **高可用设计**
   - 核心服务双活部署，故障自动切换
   - 数据实时备份，RPO < 5 分钟
   - 年可用率 ≥ 99.9%

### 6.2 成功案例

1. **拱北口岸智慧通关系统**（2023年）
   - 日均通关量 30 万人次
   - 通关效率提升 65%
   - 客户满意度 92 分

2. **罗湖口岸旅检大厅改造**（2024年）
   - 60 条自助通道升级
   - 人脸识别准确率 99.6%
   - 高峰期排队时间缩短 70%

3. **广州白云机场海关查验系统**（2024年）
   - X 光智能审图准确率 96.2%
   - 查验效率提升 80%
   - 违禁品拦截率提升 35%

---

## 七、售后服务承诺

1. **响应时间**：
   - P0 故障（系统不可用）：30 分钟响应，2 小时到场
   - P1 故障（功能异常）：2 小时响应，4 小时到场
   - P2 故障（性能下降）：4 小时响应，8 小时到场

2. **驻场服务**：
   - 试运行期间：5 人驻场（3 个月）
   - 正式运行后：2 人驻场（长期）

3. **应急保障**：
   - 重大活动期间增派技术人员
   - 提供 7x24 小时技术支持热线
   - 备品备件库（价值 50 万元）

---

## 八、附件清单

1. 《公司资质证书》（营业执照、软件企业认定证书、ISO 9001 等）
2. 《类似项目业绩证明》（拱北口岸、罗湖口岸、白云机场）
3. 《技术规格书响应表》
4. 《项目实施计划》（甘特图）
5. 《人脸识别算法检测报告》（公安部检测中心）
6. 《等保 2.0 三级测评报告》（样例）

---

**投标单位**：XX 科技股份有限公司  
**法定代表人**：XXX  
**日期**：2025 年 1 月 15 日  
**盖章**：[公司公章]
`,
    status: 'draft',
    syncStatus: 'synced',
    createdBy: 'user_003',
    createdAt: '2025-01-10T09:00:00Z',
    updatedAt: '2025-01-15T16:00:00Z',
    updatedBy: 'user_003',
    wordCount: 2856,
    version: 7,
    lockedBy: null,
    lockedAt: null,
  },
];

// Mock 文件树
export const mockFileTree: FileTreeNode[] = [
  {
    id: 'folder_001',
    type: 'folder',
    name: '需求调研',
    parentId: null,
    order: 1,
    isExpanded: true,
    children: [
      {
        id: 'doc_001',
        type: 'document',
        name: '深圳湾口岸需求调研报告',
        parentId: 'folder_001',
        order: 1,
        status: 'approved',
        syncStatus: 'synced',
        updatedAt: '2024-12-20T15:30:00Z',
        updatedBy: 'user_003',
      },
      {
        id: 'doc_002',
        type: 'document',
        name: '技术方案功能清单 v3.0',
        parentId: 'folder_001',
        order: 2,
        status: 'pending_review',
        syncStatus: 'synced',
        updatedAt: '2025-01-15T11:20:00Z',
        updatedBy: 'user_003',
      },
      {
        id: 'doc_006',
        type: 'document',
        name: '现场勘查记录',
        parentId: 'folder_001',
        order: 3,
        status: 'approved',
        syncStatus: 'synced',
        updatedAt: '2024-12-08T14:00:00Z',
        updatedBy: 'user_004',
      },
      {
        id: 'doc_007',
        type: 'document',
        name: '竞品分析报告',
        parentId: 'folder_001',
        order: 4,
        status: 'draft',
        syncStatus: 'synced',
        updatedAt: '2024-12-12T10:30:00Z',
        updatedBy: 'user_005',
      },
    ],
  },
  {
    id: 'folder_002',
    type: 'folder',
    name: '技术方案',
    parentId: null,
    order: 2,
    isExpanded: true,
    children: [
      {
        id: 'folder_004',
        type: 'folder',
        name: '系统设计',
        parentId: 'folder_002',
        order: 1,
        isExpanded: true,
        children: [
          {
            id: 'doc_003',
            type: 'document',
            name: '系统架构设计方案',
            parentId: 'folder_004',
            order: 1,
            status: 'pending_review',
            syncStatus: 'synced',
            updatedAt: '2025-01-18T10:30:00Z',
            updatedBy: 'user_003',
          },
          {
            id: 'doc_008',
            type: 'document',
            name: '数据库设计文档',
            parentId: 'folder_004',
            order: 2,
            status: 'draft',
            syncStatus: 'synced',
            updatedAt: '2025-01-12T16:00:00Z',
            updatedBy: 'user_004',
          },
          {
            id: 'doc_009',
            type: 'document',
            name: '网络拓扑设计',
            parentId: 'folder_004',
            order: 3,
            status: 'draft',
            syncStatus: 'synced',
            updatedAt: '2025-01-10T09:30:00Z',
            updatedBy: 'user_004',
          },
        ],
      },
      {
        id: 'folder_005',
        type: 'folder',
        name: '接口设计',
        parentId: 'folder_002',
        order: 2,
        isExpanded: false,
        children: [
          {
            id: 'doc_004',
            type: 'document',
            name: 'API 接口设计文档',
            parentId: 'folder_005',
            order: 1,
            status: 'approved',
            syncStatus: 'synced',
            updatedAt: '2025-01-10T09:00:00Z',
            updatedBy: 'user_004',
          },
          {
            id: 'doc_010',
            type: 'document',
            name: 'H2018系统对接方案',
            parentId: 'folder_005',
            order: 2,
            status: 'draft',
            syncStatus: 'synced',
            updatedAt: '2025-01-14T11:00:00Z',
            updatedBy: 'user_004',
          },
        ],
      },
      {
        id: 'folder_006',
        type: 'folder',
        name: '安全方案',
        parentId: 'folder_002',
        order: 3,
        isExpanded: false,
        children: [
          {
            id: 'doc_011',
            type: 'document',
            name: '等保2.0三级建设方案',
            parentId: 'folder_006',
            order: 1,
            status: 'pending_review',
            syncStatus: 'synced',
            updatedAt: '2025-01-16T14:30:00Z',
            updatedBy: 'user_003',
          },
          {
            id: 'doc_012',
            type: 'document',
            name: '数据安全保护方案',
            parentId: 'folder_006',
            order: 2,
            status: 'draft',
            syncStatus: 'synced',
            updatedAt: '2025-01-13T10:00:00Z',
            updatedBy: 'user_004',
          },
        ],
      },
    ],
  },
  {
    id: 'folder_003',
    type: 'folder',
    name: '投标文件',
    parentId: null,
    order: 3,
    isExpanded: false,
    children: [
      {
        id: 'doc_005',
        type: 'document',
        name: '投标报价单',
        parentId: 'folder_003',
        order: 1,
        status: 'draft',
        syncStatus: 'synced',
        updatedAt: '2025-01-15T16:00:00Z',
        updatedBy: 'user_003',
      },
      {
        id: 'doc_013',
        type: 'document',
        name: '公司资质材料清单',
        parentId: 'folder_003',
        order: 2,
        status: 'approved',
        syncStatus: 'synced',
        updatedAt: '2025-01-08T09:00:00Z',
        updatedBy: 'user_002',
      },
      {
        id: 'doc_014',
        type: 'document',
        name: '项目实施计划',
        parentId: 'folder_003',
        order: 3,
        status: 'draft',
        syncStatus: 'synced',
        updatedAt: '2025-01-17T15:00:00Z',
        updatedBy: 'user_003',
      },
      {
        id: 'doc_015',
        type: 'document',
        name: '售后服务承诺书',
        parentId: 'folder_003',
        order: 4,
        status: 'draft',
        syncStatus: 'synced',
        updatedAt: '2025-01-11T11:30:00Z',
        updatedBy: 'user_002',
      },
    ],
  },
  {
    id: 'folder_007',
    type: 'folder',
    name: '参考资料',
    parentId: null,
    order: 4,
    isExpanded: false,
    children: [
      {
        id: 'doc_016',
        type: 'document',
        name: '海关总署口岸信息化建设规范',
        parentId: 'folder_007',
        order: 1,
        status: 'approved',
        syncStatus: 'synced',
        updatedAt: '2024-11-20T10:00:00Z',
        updatedBy: 'user_005',
      },
      {
        id: 'doc_017',
        type: 'document',
        name: '拱北口岸案例分析',
        parentId: 'folder_007',
        order: 2,
        status: 'approved',
        syncStatus: 'synced',
        updatedAt: '2024-12-05T14:00:00Z',
        updatedBy: 'user_005',
      },
      {
        id: 'doc_018',
        type: 'document',
        name: '人脸识别技术白皮书',
        parentId: 'folder_007',
        order: 3,
        status: 'approved',
        syncStatus: 'synced',
        updatedAt: '2024-11-28T09:00:00Z',
        updatedBy: 'user_004',
      },
    ],
  },
];

// Mock AI 对话
export const mockChatSessions: ChatSession[] = [
  {
    id: 'session_001',
    projectId: 'proj_001',
    title: '优化系统架构描述',
    createdAt: '2025-01-18T10:00:00Z',
    updatedAt: '2025-01-18T10:30:00Z',
    messages: [
      {
        id: 'msg_001',
        role: 'user',
        content: '帮我优化一下"云边端协同架构"这段描述，让它更专业、更有说服力',
        createdAt: '2025-01-18T10:00:00Z',
        attachedText: '本系统采用云边端协同架构，结合边缘计算与云计算优势',
      },
      {
        id: 'msg_002',
        role: 'assistant',
        content: `好的，我来帮您优化这段架构描述。

**优化后的版本：**

> 本系统采用**云边端三层协同架构**，充分发挥边缘计算的低延迟优势与云计算的海量数据处理能力。边缘侧部署 AI 推理引擎，实现人脸识别、证件 OCR 等实时查验功能，响应时间 < 500ms；云端承载大数据分析、模型训练、跨口岸协同等离线任务，形成"边缘实时响应 + 云端智能决策"的闭环体系。该架构在保障通关效率的同时，确保断网情况下边缘节点可独立运行 72 小时以上，满足口岸 7x24 小时不间断运营需求。

**优化要点：**

1. **量化指标**：加入"响应时间 < 500ms"、"独立运行 72 小时"等具体数据
2. **场景化描述**：明确边缘侧和云端的职责分工
3. **价值强调**：突出"低延迟"、"高可用"、"不间断运营"等客户关注点
4. **专业术语**：使用"AI 推理引擎"、"闭环体系"等行业术语

需要我继续优化其他部分吗？`,
        createdAt: '2025-01-18T10:01:30Z',
        agentType: 'document',
      },
      {
        id: 'msg_003',
        role: 'user',
        content: '很好！再帮我生成一段关于"人脸识别准确率"的技术说明',
        createdAt: '2025-01-18T10:05:00Z',
      },
      {
        id: 'msg_004',
        role: 'assistant',
        content: `为您生成人脸识别准确率的技术说明：

---

### 人脸识别技术指标

本系统采用**虹软 ArcFace 深度学习算法**，在 LFW（Labeled Faces in the Wild）国际权威数据集上准确率达 99.8%，在实际口岸场景中表现如下：

#### 核心指标

| 指标 | 数值 | 说明 |
|------|------|------|
| 1:1 证件比对准确率 | ≥ 99.5% | 现场照片与证件照比对 |
| 1:N 布控库比对速度 | < 1 秒 | 10 万级人脸库检索 |
| 活体检测准确率 | ≥ 99% | 防照片/视频攻击 |
| 口罩遮挡识别率 | ≥ 95% | 疫情常态化需求 |

#### 技术优势

1. **多光谱成像**：采用可见光 + 近红外双摄像头，克服强光/逆光/弱光环境影响
2. **3D 活体检测**：基于深度信息的活体判断，有效防御打印照片、屏幕翻拍等攻击
3. **动态阈值调整**：根据通关高峰/平峰时段自动调整识别阈值，平衡效率与安全
4. **持续学习优化**：每月基于实际数据进行模型微调，识别准确率持续提升

#### 认证资质

- 通过公安部检测中心人脸识别算法认证
- 符合 GA/T 1093-2013《人脸识别应用系统技术要求》
- 获得国家密码管理局商用密码产品认证

---

这样的描述既有数据支撑，又有技术细节，还有权威认证背书，非常适合放在技术方案中。`,
        createdAt: '2025-01-18T10:06:45Z',
        agentType: 'document',
      },
    ],
  },
  {
    id: 'session_002',
    projectId: 'proj_001',
    title: '生成投标文件大纲',
    createdAt: '2025-01-15T14:00:00Z',
    updatedAt: '2025-01-15T14:15:00Z',
    messages: [
      {
        id: 'msg_005',
        role: 'user',
        content: '帮我生成一份完整的投标文件大纲，包括技术标和商务标',
        createdAt: '2025-01-15T14:00:00Z',
      },
      {
        id: 'msg_006',
        role: 'assistant',
        content: `为您生成深圳湾口岸智慧通关系统投标文件大纲：

---

## 投标文件大纲

### 第一册：商务标

#### 第一章 投标函及投标函附录
1.1 投标函  
1.2 法定代表人身份证明  
1.3 授权委托书  

#### 第二章 资格证明文件
2.1 营业执照副本  
2.2 软件企业认定证书  
2.3 ISO 9001 质量管理体系认证  
2.4 ISO 27001 信息安全管理体系认证  
2.5 CMMI 5 级认证  
2.6 等保 2.0 三级测评报告（公司系统）  

#### 第三章 业绩证明
3.1 类似项目业绩清单（近 3 年）  
3.2 拱北口岸智慧通关系统合同及验收报告  
3.3 罗湖口岸旅检大厅改造合同及验收报告  
3.4 广州白云机场海关查验系统合同及验收报告  
3.5 客户评价函  

#### 第四章 财务状况
4.1 近三年审计报告  
4.2 银行资信证明  
4.3 纳税证明  

#### 第五章 商务报价
5.1 投标报价汇总表  
5.2 软件系统报价明细表  
5.3 硬件设备报价明细表  
5.4 实施服务报价明细表  
5.5 运维服务报价明细表  

#### 第六章 商务条款响应
6.1 付款方式响应  
6.2 交付周期承诺  
6.3 质保期承诺  
6.4 培训服务方案  
6.5 售后服务承诺书  

---

### 第二册：技术标

#### 第一章 项目理解
1.1 项目背景分析  
1.2 建设目标理解  
1.3 建设内容理解  
1.4 重点难点分析  

#### 第二章 需求响应
2.1 技术规格书逐条响应表  
2.2 功能需求响应  
2.3 性能需求响应  
2.4 安全需求响应  
2.5 合规需求响应  

#### 第三章 总体方案
3.1 建设思路  
3.2 设计原则  
3.3 总体架构  
3.4 技术路线  

#### 第四章 详细设计

**4.1 智能查验子系统**  
- 人脸识别方案  
- 证件 OCR 方案  
- 自助通道设计  
- 人工查验辅助  

**4.2 智能行李查验子系统**  
- X 光智能审图方案  
- 风险评估模型  
- 开箱查验辅助  
- 行李追溯管理  

**4.3 数据共享平台**  
- 数据对接方案  
- 数据交换方案  
- 数据服务方案  
- 数据安全方案  

**4.4 综合管理平台**  
- 指挥调度方案  
- 系统管理方案  
- 统计分析方案  
- 大屏展示方案  

**4.5 移动应用**  
- 旅客端小程序  
- 关员端 APP  

#### 第五章 技术架构
5.1 逻辑架构设计  
5.2 物理架构设计  
5.3 部署架构设计  
5.4 网络架构设计  
5.5 技术选型说明  

#### 第六章 接口设计
6.1 接口规范  
6.2 核心接口设计  
6.3 H2018 系统对接方案  
6.4 边检系统对接方案  
6.5 第三方系统对接方案  

#### 第七章 数据库设计
7.1 数据库选型  
7.2 数据模型设计  
7.3 数据字典  
7.4 数据备份方案  

#### 第八章 安全设计
8.1 网络安全设计  
8.2 数据安全设计  
8.3 应用安全设计  
8.4 等保 2.0 三级建设方案  
8.5 密码应用方案  

#### 第九章 性能设计
9.1 性能指标  
9.2 性能优化策略  
9.3 压力测试方案  

#### 第十章 容灾设计
10.1 高可用方案  
10.2 备份策略  
10.3 容灾演练计划  

#### 第十一章 运维监控
11.1 监控体系设计  
11.2 告警策略  
11.3 日志管理  
11.4 运维工具  

#### 第十二章 实施方案
12.1 项目组织架构  
12.2 项目实施计划（甘特图）  
12.3 里程碑管理  
12.4 风险管理计划  
12.5 质量保证计划  
12.6 沟通管理计划  

#### 第十三章 培训方案
13.1 培训对象  
13.2 培训内容  
13.3 培训计划  
13.4 培训教材  

#### 第十四章 测试方案
14.1 测试策略  
14.2 测试用例  
14.3 测试环境  
14.4 验收标准  

#### 第十五章 售后服务
15.1 服务体系  
15.2 响应机制  
15.3 驻场服务  
15.4 应急保障  
15.5 备品备件  

#### 第十六章 技术创新
16.1 AI 算法创新  
16.2 云边端协同创新  
16.3 数据安全创新  

#### 附件
- 附件 1：人脸识别算法检测报告（公安部检测中心）  
- 附件 2：软件著作权登记证书  
- 附件 3：发明专利证书  
- 附件 4：项目团队简历  
- 附件 5：设备技术参数表  

---

这份大纲涵盖了投标文件的所有必要内容，您可以根据实际情况进行调整。`,
        createdAt: '2025-01-15T14:05:20Z',
        agentType: 'document',
      },
    ],
  },
];

// Mock 通知
export const mockNotifications: Notification[] = [
  {
    id: 'notif_001',
    type: 'approval_request',
    title: '审批请求',
    content: '王文渊 提交了《系统架构设计方案》等待您的审批',
    isRead: false,
    createdAt: '2025-01-18T10:30:00Z',
    projectId: 'proj_001',
    documentId: 'doc_003',
    actionUrl: '/approvals?id=approval_001',
    actionLabel: '去审批',
  },
  {
    id: 'notif_002',
    type: 'comment',
    title: '新评论',
    content: '李朋飞 在《深圳湾口岸需求调研报告》中评论了您',
    isRead: false,
    createdAt: '2025-01-17T15:20:00Z',
    projectId: 'proj_001',
    documentId: 'doc_001',
  },
  {
    id: 'notif_003',
    type: 'approval_result',
    title: '审批通过',
    content: '您提交的《API 接口设计文档》已通过审批',
    isRead: true,
    createdAt: '2025-01-16T11:00:00Z',
    projectId: 'proj_001',
    documentId: 'doc_004',
  },
  {
    id: 'notif_004',
    type: 'mention',
    title: '有人@了你',
    content: '陈雨婷 在《投标报价单》中提到了您',
    isRead: false,
    createdAt: '2025-01-15T16:45:00Z',
    projectId: 'proj_001',
    documentId: 'doc_005',
  },
  {
    id: 'notif_005',
    type: 'system',
    title: '系统通知',
    content: '深圳湾口岸项目投标截止日期临近（剩余14天）',
    isRead: true,
    createdAt: '2025-01-14T09:00:00Z',
    projectId: 'proj_001',
  },
];

// 便捷方法
export const getDocumentById = (docId: string): Document | undefined => {
  return mockDocuments.find(d => d.id === docId);
};

export const getUserById = (userId: string): User | undefined => {
  return mockUsers.find(u => u.id === userId);
};

// Mock 文件夹（从 mockFileTree 提取）
export const mockFolders: Folder[] = [
  { id: 'folder_001', projectId: 'proj_001', parentId: null, name: '需求调研', order: 1, createdAt: '2024-12-01T10:00:00Z', updatedAt: '2024-12-01T10:00:00Z' },
  { id: 'folder_002', projectId: 'proj_001', parentId: null, name: '技术方案', order: 2, createdAt: '2024-12-01T10:00:00Z', updatedAt: '2024-12-01T10:00:00Z' },
  { id: 'folder_003', projectId: 'proj_001', parentId: null, name: '投标文件', order: 3, createdAt: '2024-12-01T10:00:00Z', updatedAt: '2024-12-01T10:00:00Z' },
  { id: 'folder_004', projectId: 'proj_001', parentId: 'folder_002', name: '系统设计', order: 1, createdAt: '2024-12-01T10:00:00Z', updatedAt: '2024-12-01T10:00:00Z' },
  { id: 'folder_005', projectId: 'proj_001', parentId: 'folder_002', name: '接口设计', order: 2, createdAt: '2024-12-01T10:00:00Z', updatedAt: '2024-12-01T10:00:00Z' },
  { id: 'folder_006', projectId: 'proj_001', parentId: 'folder_002', name: '安全方案', order: 3, createdAt: '2024-12-01T10:00:00Z', updatedAt: '2024-12-01T10:00:00Z' },
  { id: 'folder_007', projectId: 'proj_001', parentId: null, name: '参考资料', order: 4, createdAt: '2024-12-01T10:00:00Z', updatedAt: '2024-12-01T10:00:00Z' },
];

// Mock 任务
export const mockTasks: Task[] = [
  {
    id: 'task_001',
    projectId: 'proj_001',
    projectName: '深圳湾口岸智慧通关系统',
    title: '编写《系统架构设计方案》',
    description: '需要详细描述系统的整体架构，包括前端、后端、数据库、中间件等各层设计。重点关注高可用性和可扩展性。',
    assignerId: 'user_002',
    assignerName: '李朋飞',
    assigneeId: 'user_003',
    assigneeName: '王文渊',
    assignedAt: '2025-01-18T09:00:00Z',
    status: 'in_progress',
    priority: 'urgent',
    dueDate: '2025-01-21T18:00:00Z',
    progress: 65,
    documentId: 'doc_003',
    documentName: '系统架构设计方案.md',
    documentPath: '/技术方案/系统设计/系统架构设计方案.md',
    timeline: [
      {
        type: 'assigned',
        userId: 'user_002',
        userName: '李朋飞',
        timestamp: '2025-01-18T09:00:00Z',
      },
      {
        type: 'started',
        userId: 'user_003',
        userName: '王文渊',
        timestamp: '2025-01-18T10:30:00Z',
      },
      {
        type: 'progress_updated',
        userId: 'user_003',
        userName: '王文渊',
        timestamp: '2025-01-19T14:20:00Z',
        note: '已完成前端架构和后端架构设计',
      },
    ],
    createdAt: '2025-01-18T09:00:00Z',
    updatedAt: '2025-01-19T14:20:00Z',
  },
  {
    id: 'task_002',
    projectId: 'proj_001',
    projectName: '深圳湾口岸智慧通关系统',
    title: '编写《API 接口设计文档》',
    description: '设计所有前后端交互的 API 接口，包括请求参数、响应格式、错误码定义等。需要符合 RESTful 规范。',
    assignerId: 'user_002',
    assignerName: '李朋飞',
    assigneeId: 'user_003',
    assigneeName: '王文渊',
    assignedAt: '2025-01-17T14:00:00Z',
    status: 'completed',
    priority: 'high',
    dueDate: '2025-01-20T18:00:00Z',
    progress: 100,
    documentId: 'doc_004',
    documentName: 'API 接口设计文档.md',
    documentPath: '/技术方案/接口设计/API 接口设计文档.md',
    timeline: [
      {
        type: 'assigned',
        userId: 'user_002',
        userName: '李朋飞',
        timestamp: '2025-01-17T14:00:00Z',
      },
      {
        type: 'started',
        userId: 'user_003',
        userName: '王文渊',
        timestamp: '2025-01-17T15:00:00Z',
      },
      {
        type: 'progress_updated',
        userId: 'user_003',
        userName: '王文渊',
        timestamp: '2025-01-18T16:30:00Z',
        note: '完成核心接口设计',
      },
      {
        type: 'completed',
        userId: 'user_003',
        userName: '王文渊',
        timestamp: '2025-01-19T11:00:00Z',
      },
    ],
    createdAt: '2025-01-17T14:00:00Z',
    updatedAt: '2025-01-19T11:00:00Z',
    completedAt: '2025-01-19T11:00:00Z',
  },
  {
    id: 'task_003',
    projectId: 'proj_001',
    projectName: '深圳湾口岸智慧通关系统',
    title: '编写《投标报价单》',
    description: '根据技术方案和客户需求，制定详细的报价清单。包括硬件设备、软件开发、实施服务、售后维护等各项费用。',
    assignerId: 'user_002',
    assignerName: '李朋飞',
    assigneeId: 'user_004',
    assigneeName: '陈雨婷',
    assignedAt: '2025-01-19T10:00:00Z',
    status: 'in_progress',
    priority: 'high',
    dueDate: '2025-01-23T18:00:00Z',
    progress: 40,
    documentId: 'doc_005',
    documentName: '投标报价单.md',
    documentPath: '/投标文件/投标报价单.md',
    timeline: [
      {
        type: 'assigned',
        userId: 'user_002',
        userName: '李朋飞',
        timestamp: '2025-01-19T10:00:00Z',
      },
      {
        type: 'started',
        userId: 'user_004',
        userName: '陈雨婷',
        timestamp: '2025-01-19T11:30:00Z',
      },
      {
        type: 'progress_updated',
        userId: 'user_004',
        userName: '陈雨婷',
        timestamp: '2025-01-20T09:00:00Z',
        note: '完成硬件设备报价部分',
      },
    ],
    createdAt: '2025-01-19T10:00:00Z',
    updatedAt: '2025-01-20T09:00:00Z',
  },
  {
    id: 'task_004',
    projectId: 'proj_001',
    projectName: '深圳湾口岸智慧通关系统',
    title: '编写《数据安全方案》',
    description: '设计系统的数据安全保护方案，包括数据加密、访问控制、审计日志、备份恢复等内容。需要符合等保三级要求。',
    assignerId: 'user_002',
    assignerName: '李朋飞',
    assigneeId: 'user_005',
    assigneeName: '赵凯文',
    assignedAt: '2025-01-20T08:00:00Z',
    status: 'todo',
    priority: 'normal',
    dueDate: '2025-01-25T18:00:00Z',
    progress: 0,
    documentId: 'doc_006',
    documentName: '数据安全方案.md',
    documentPath: '/技术方案/安全方案/数据安全方案.md',
    timeline: [
      {
        type: 'assigned',
        userId: 'user_002',
        userName: '李朋飞',
        timestamp: '2025-01-20T08:00:00Z',
      },
    ],
    createdAt: '2025-01-20T08:00:00Z',
    updatedAt: '2025-01-20T08:00:00Z',
  },
  {
    id: 'task_005',
    projectId: 'proj_001',
    projectName: '深圳湾口岸智慧通关系统',
    title: '编写《技术方案功能清单》',
    description: '整理系统的所有功能点，形成详细的功能清单。需要包括功能描述、优先级、实现难度等信息。',
    assignerId: 'user_002',
    assignerName: '李朋飞',
    assigneeId: 'user_003',
    assigneeName: '王文渊',
    assignedAt: '2025-01-16T10:00:00Z',
    status: 'completed',
    priority: 'normal',
    dueDate: '2025-01-18T18:00:00Z',
    progress: 100,
    documentId: 'doc_002',
    documentName: '技术方案功能清单.md',
    documentPath: '/技术方案/技术方案功能清单.md',
    timeline: [
      {
        type: 'assigned',
        userId: 'user_002',
        userName: '李朋飞',
        timestamp: '2025-01-16T10:00:00Z',
      },
      {
        type: 'started',
        userId: 'user_003',
        userName: '王文渊',
        timestamp: '2025-01-16T14:00:00Z',
      },
      {
        type: 'completed',
        userId: 'user_003',
        userName: '王文渊',
        timestamp: '2025-01-17T16:00:00Z',
      },
    ],
    createdAt: '2025-01-16T10:00:00Z',
    updatedAt: '2025-01-17T16:00:00Z',
    completedAt: '2025-01-17T16:00:00Z',
  },
  {
    id: 'task_006',
    projectId: 'proj_001',
    projectName: '深圳湾口岸智慧通关系统',
    title: '编写《投标技术方案》',
    description: '编写完整的投标技术方案文档，整合所有技术设计内容。这是投标的核心文档，需要特别重视。',
    assignerId: 'user_002',
    assignerName: '李朋飞',
    assigneeId: 'user_004',
    assigneeName: '陈雨婷',
    assignedAt: '2025-01-15T09:00:00Z',
    status: 'blocked',
    priority: 'urgent',
    dueDate: '2025-01-22T18:00:00Z',
    progress: 30,
    documentId: 'doc_007',
    documentName: '投标技术方案.md',
    documentPath: '/投标文件/投标技术方案.md',
    timeline: [
      {
        type: 'assigned',
        userId: 'user_002',
        userName: '李朋飞',
        timestamp: '2025-01-15T09:00:00Z',
      },
      {
        type: 'started',
        userId: 'user_004',
        userName: '陈雨婷',
        timestamp: '2025-01-15T10:30:00Z',
      },
      {
        type: 'progress_updated',
        userId: 'user_004',
        userName: '陈雨婷',
        timestamp: '2025-01-17T15:00:00Z',
        note: '完成前三章内容',
      },
      {
        type: 'blocked',
        userId: 'user_004',
        userName: '陈雨婷',
        timestamp: '2025-01-19T14:00:00Z',
        note: '等待系统架构设计方案完成后才能继续编写',
      },
    ],
    createdAt: '2025-01-15T09:00:00Z',
    updatedAt: '2025-01-19T14:00:00Z',
  },
];
